(function(c,a){if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports!=="undefined"){a()}else{var b={exports:{}};a();c.bootstrapTableCookie=b.exports}}})(this,function(){function e(g,h){if(!(g instanceof h)){throw new TypeError("Cannot call a class as a function")}}var c=function(){function g(l,j){for(var h=0;h<j.length;h++){var k=j[h];k.enumerable=k.enumerable||false;k.configurable=true;if("value" in k){k.writable=true}Object.defineProperty(l,k.key,k)}}return function(j,h,i){if(h){g(j.prototype,h)}if(i){g(j,i)}return j}}();function d(g,h){if(!g){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return h&&(typeof h==="object"||typeof h==="function")?h:g}var b=function a(h,k,j){if(h===null){h=Function.prototype}var l=Object.getOwnPropertyDescriptor(h,k);if(l===undefined){var i=Object.getPrototypeOf(h);if(i===null){return undefined}else{return a(i,k,j)}}else{if("value" in l){return l.value}else{var g=l.get;if(g===undefined){return undefined}return g.call(j)}}};function f(h,g){if(typeof g!=="function"&&g!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof g)}h.prototype=Object.create(g&&g.prototype,{constructor:{value:h,enumerable:false,writable:true,configurable:true}});if(g){Object.setPrototypeOf?Object.setPrototypeOf(h,g):h.__proto__=g}}(function(l){var i={cookieIds:{sortOrder:"bs.table.sortOrder",sortName:"bs.table.sortName",pageNumber:"bs.table.pageNumber",pageList:"bs.table.pageList",columns:"bs.table.columns",searchText:"bs.table.searchText",filterControl:"bs.table.filterControl",filterBy:"bs.table.filterBy"},getCurrentHeader:function m(r){var s=r.$header;if(r.options.height){s=r.$tableHeader}return s},getCurrentSearchControls:function o(r){var s="select, input";if(r.options.height){s="table select, table input"}return s},cookieEnabled:function n(){return !!navigator.cookieEnabled},inArrayCookiesEnabled:function g(u,r){var s=-1;for(var t=0;t<r.length;t++){if(u.toLowerCase()===r[t].toLowerCase()){s=t;break}}return s},setCookie:function q(r,t,s){if(!r.options.cookie||!i.cookieEnabled()||r.options.cookieIdTable===""){return}if(i.inArrayCookiesEnabled(t,r.options.cookiesEnabled)===-1){return}t=r.options.cookieIdTable+"."+t;switch(r.options.cookieStorage){case"cookieStorage":document.cookie=[t,"=",s,"; expires="+i.calculateExpiration(r.options.cookieExpire),r.options.cookiePath?"; path="+r.options.cookiePath:"",r.options.cookieDomain?"; domain="+r.options.cookieDomain:"",r.options.cookieSecure?"; secure":""].join("");break;case"localStorage":localStorage.setItem(t,s);break;case"sessionStorage":sessionStorage.setItem(t,s);break;default:return false}return true},getCookie:function p(s,r,v){if(!v){return null}if(i.inArrayCookiesEnabled(v,s.options.cookiesEnabled)===-1){return null}v=r+"."+v;switch(s.options.cookieStorage){case"cookieStorage":var t="; "+document.cookie;var u=t.split("; "+v+"=");return u.length===2?u.pop().split(";").shift():null;case"localStorage":return localStorage.getItem(v);case"sessionStorage":return sessionStorage.getItem(v);default:return null}},deleteCookie:function k(s,r,t){t=r+"."+t;switch(s.options.cookieStorage){case"cookieStorage":document.cookie=[encodeURIComponent(t),"=","; expires=Thu, 01 Jan 1970 00:00:00 GMT",s.options.cookiePath?"; path="+s.options.cookiePath:"",s.options.cookieDomain?"; domain="+s.options.cookieDomain:""].join("");break;case"localStorage":localStorage.removeItem(t);break;case"sessionStorage":sessionStorage.removeItem(t);break;default:return false}return true},calculateExpiration:function h(r){var s=r.replace(/[0-9]*/,"");r=r.replace(/[A-Za-z]{1,2}/,"");switch(s.toLowerCase()){case"s":r=+r;break;case"mi":r*=60;break;case"h":r=r*60*60;break;case"d":r=r*24*60*60;break;case"m":r=r*30*24*60*60;break;case"y":r=r*365*24*60*60;break;default:r=undefined;break}if(!r){return""}var t=new Date();t.setTime(t.getTime()+r*1000);return t.toGMTString()},initCookieFilters:function j(r){setTimeout(function(){var t=JSON.parse(i.getCookie(r,r.options.cookieIdTable,i.cookieIds.filterControl));if(!r.options.filterControlValuesLoaded&&t){var s={};var w=i.getCurrentHeader(r);var v=i.getCurrentSearchControls(r);var u=function u(y,x){l(x).each(function(A,z){if(z.text!==""){l(y).val(z.text);s[z.field]=z.text}})};w.find(v).each(function(){var y=l(this).closest("[data-field]").data("field");var x=t.filter(function(z){return z.field===y});u(this,x)});r.initColumnSearch(s);r.options.filterControlValuesLoaded=true;r.initServer()}},250)}};l.extend(l.fn.bootstrapTable.defaults,{cookie:false,cookieExpire:"2h",cookiePath:null,cookieDomain:null,cookieSecure:null,cookieIdTable:"",cookiesEnabled:["bs.table.sortOrder","bs.table.sortName","bs.table.pageNumber","bs.table.pageList","bs.table.columns","bs.table.searchText","bs.table.filterControl","bs.table.filterBy"],cookieStorage:"cookieStorage",filterControls:[],filterControlValuesLoaded:false});l.fn.bootstrapTable.methods.push("getCookies");l.fn.bootstrapTable.methods.push("deleteCookie");l.extend(l.fn.bootstrapTable.utils,{setCookie:i.setCookie,getCookie:i.getCookie});l.BootstrapTable=function(t){f(z,t);function z(){e(this,z);return d(this,(z.__proto__||Object.getPrototypeOf(z)).apply(this,arguments))}c(z,[{key:"init",value:function H(){var J=JSON.parse(i.getCookie(this,this.options.cookieIdTable,i.cookieIds.filterBy));this.filterColumns=J?J:{};this.options.filterControls=[];this.options.filterControlValuesLoaded=false;this.options.cookiesEnabled=typeof this.options.cookiesEnabled==="string"?this.options.cookiesEnabled.replace("[","").replace("]","").replace(/ /g,"").toLowerCase().split(","):this.options.cookiesEnabled;if(this.options.filterControl){var I=this;this.$el.on("column-search.bs.table",function(N,M,O){var L=true;for(var K=0;K<I.options.filterControls.length;K++){if(I.options.filterControls[K].field===M){I.options.filterControls[K].text=O;L=false;break}}if(L){I.options.filterControls.push({field:M,text:O})}i.setCookie(I,i.cookieIds.filterControl,JSON.stringify(I.options.filterControls))}).on("created-controls.bs.table",i.initCookieFilters(I))}b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"init",this).call(this)}},{key:"initServer",value:function y(){var J=this;if(J.options.cookie&&J.options.filterControl&&!J.options.filterControlValuesLoaded){var I=JSON.parse(i.getCookie(J,J.options.cookieIdTable,i.cookieIds.filterControl));if(I){return}}b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"initServer",this).call(this)}},{key:"initTable",value:function F(){b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"initTable",this).call(this);this.initCookie()}},{key:"onSort",value:function v(){var I=arguments.length<=0?undefined:arguments[0];b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onSort",this).call(this,I);i.setCookie(this,i.cookieIds.sortOrder,this.options.sortOrder);i.setCookie(this,i.cookieIds.sortName,this.options.sortName)}},{key:"onPageNumber",value:function u(){var I=arguments.length<=0?undefined:arguments[0];b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onPageNumber",this).call(this,I);i.setCookie(this,i.cookieIds.pageNumber,this.options.pageNumber);return false}},{key:"onPageListChange",value:function s(){var I=arguments.length<=0?undefined:arguments[0];b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onPageListChange",this).call(this,I);i.setCookie(this,i.cookieIds.pageList,this.options.pageSize);i.setCookie(this,i.cookieIds.pageNumber,this.options.pageNumber);return false}},{key:"onPagePre",value:function A(){var I=arguments.length<=0?undefined:arguments[0];b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onPagePre",this).call(this,I);i.setCookie(this,i.cookieIds.pageNumber,this.options.pageNumber);return false}},{key:"onPageNext",value:function r(){var I=arguments.length<=0?undefined:arguments[0];b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onPageNext",this).call(this,I);i.setCookie(this,i.cookieIds.pageNumber,this.options.pageNumber);return false}},{key:"toggleColumn",value:function x(){b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"toggleColumn",this).call(this);var I=[];l.each(this.columns,function(J,K){if(K.visible){I.push(K.field)}});i.setCookie(this,i.cookieIds.columns,JSON.stringify(I))}},{key:"selectPage",value:function C(I){b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"selectPage",this).call(this);i.setCookie(this,i.cookieIds.pageNumber,I)}},{key:"onSearch",value:function E(){for(var I=arguments.length,J=Array(I),K=0;K<I;K++){J[K]=arguments[K]}var L=Array.prototype.slice.apply(J);b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"onSearch",this).call(this,this,L);if(l(L[0].currentTarget).parent().hasClass("search")){i.setCookie(this,i.cookieIds.searchText,this.searchText)}i.setCookie(this,i.cookieIds.pageNumber,this.options.pageNumber)}},{key:"filterBy",value:function D(){b(z.prototype.__proto__||Object.getPrototypeOf(z.prototype),"filterBy",this).call(this);i.setCookie(this,i.cookieIds.filterBy,JSON.stringify(this.filterColumns))}},{key:"initCookie",value:function G(){if(!this.options.cookie){return}if(this.options.cookieIdTable===""||this.options.cookieExpire===""||!i.cookieEnabled()){console.error("Configuration error. Please review the cookieIdTable and the cookieExpire property. If the properties are correct, then this browser does not support cookies.");this.options.cookie=false;return}var I=i.getCookie(this,this.options.cookieIdTable,i.cookieIds.sortOrder);var K=i.getCookie(this,this.options.cookieIdTable,i.cookieIds.sortName);var J=i.getCookie(this,this.options.cookieIdTable,i.cookieIds.pageNumber);var N=i.getCookie(this,this.options.cookieIdTable,i.cookieIds.pageList);var M=JSON.parse(i.getCookie(this,this.options.cookieIdTable,i.cookieIds.columns));var L=i.getCookie(this,this.options.cookieIdTable,i.cookieIds.searchText);this.options.sortOrder=I?I:this.options.sortOrder;this.options.sortName=K?K:this.options.sortName;this.options.pageNumber=J?+J:this.options.pageNumber;this.options.pageSize=N?N===this.options.formatAllRows()?N:+N:this.options.pageSize;this.options.searchText=L?L:"";if(M){l.each(this.columns,function(O,P){P.visible=l.inArray(P.field,M)!==-1})}}},{key:"getCookies",value:function B(){var J=this;var I={};l.each(i.cookieIds,function(K,L){I[K]=i.getCookie(J,J.options.cookieIdTable,L);if(K==="columns"){I[K]=JSON.parse(I[K])}});return I}},{key:"deleteCookie",value:function w(I){if(I===""||!i.cookieEnabled()){return}i.deleteCookie(this,this.options.cookieIdTable,i.cookieIds[I])}}]);return z}(l.BootstrapTable)})(jQuery)});