(function(c,a){if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports!=="undefined"){a()}else{var b={exports:{}};a();c.bootstrapTableMultipleSort=b.exports}}})(this,function(){var a=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol==="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b};(function(c){var s=false;var n=function n(x){var t=x.sortModalSelector,w="#"+t;if(!c(w).hasClass("modal")){var y='  <div class="modal fade" id="'+t+'" tabindex="-1" role="dialog" aria-labelledby="'+t+'Label" aria-hidden="true">';y+='         <div class="modal-dialog">';y+='             <div class="modal-content">';y+='                 <div class="modal-header">';y+='                     <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>';y+='                     <h4 class="modal-title" id="'+t+'Label">'+x.options.formatMultipleSort()+"</h4>";y+="                 </div>";y+='                 <div class="modal-body">';y+='                     <div class="bootstrap-table">';y+='                         <div class="fixed-table-toolbar">';y+='                             <div class="bars">';y+='                                 <div id="toolbar">';y+='                                     <button id="add" type="button" class="btn btn-default"><i class="'+x.options.iconsPrefix+" "+x.options.icons.plus+'"></i> '+x.options.formatAddLevel()+"</button>";y+='                                     <button id="delete" type="button" class="btn btn-default" disabled><i class="'+x.options.iconsPrefix+" "+x.options.icons.minus+'"></i> '+x.options.formatDeleteLevel()+"</button>";y+="                                 </div>";y+="                             </div>";y+="                         </div>";y+='                         <div class="fixed-table-container">';y+='                             <table id="multi-sort" class="table">';y+="                                 <thead>";y+="                                     <tr>";y+="                                         <th></th>";y+='                                         <th><div class="th-inner">'+x.options.formatColumn()+"</div></th>";y+='                                         <th><div class="th-inner">'+x.options.formatOrder()+"</div></th>";y+="                                     </tr>";y+="                                 </thead>";y+="                                 <tbody></tbody>";y+="                             </table>";y+="                         </div>";y+="                     </div>";y+="                 </div>";y+='                 <div class="modal-footer">';y+='                     <button type="button" class="btn btn-default" data-dismiss="modal">'+x.options.formatCancel()+"</button>";y+='                     <button type="button" class="btn btn-primary">'+x.options.formatSort()+"</button>";y+="                 </div>";y+="             </div>";y+="         </div>";y+="     </div>";c("body").append(c(y));x.$sortModal=c(w);var u=x.$sortModal.find("tbody > tr");x.$sortModal.off("click","#add").on("click","#add",function(){var z=x.$sortModal.find(".multi-sort-name:first option").length,A=x.$sortModal.find("tbody tr").length;if(A<z){A++;x.addLevel();x.setButtonStates()}});x.$sortModal.off("click","#delete").on("click","#delete",function(){var z=x.$sortModal.find(".multi-sort-name:first option").length,A=x.$sortModal.find("tbody tr").length;if(A>1&&A<=z){A--;x.$sortModal.find("tbody tr:last").remove();x.setButtonStates()}});x.$sortModal.off("click",".btn-primary").on("click",".btn-primary",function(){var A=x.$sortModal.find("tbody > tr"),E=x.$sortModal.find("div.alert"),z=[],D=[];x.options.sortPriority=c.map(A,function(J){var H=c(J),I=H.find(".multi-sort-name").val(),G=H.find(".multi-sort-order").val();z.push(I);return{sortName:I,sortOrder:G}});var F=z.sort();for(var C=0;C<z.length-1;C++){if(F[C+1]==F[C]){D.push(F[C])}}if(D.length>0){if(E.length===0){E='<div class="alert alert-danger" role="alert"><strong>'+x.options.formatDuplicateAlertTitle()+"</strong> "+x.options.formatDuplicateAlertDescription()+"</div>";c(E).insertBefore(x.$sortModal.find(".bars"))}}else{if(E.length===1){c(E).remove()}x.$sortModal.modal("hide");x.options.sortName="";if(x.options.sidePagination==="server"){var B=x.options.queryParams;x.options.queryParams=function(G){G.multiSort=x.options.sortPriority;return B(G)};s=false;x.initServer(x.options.silentSort);return}x.onMultipleSort()}});if(x.options.sortPriority===null||x.options.sortPriority.length===0){if(x.options.sortName){x.options.sortPriority=[{sortName:x.options.sortName,sortOrder:x.options.sortOrder}]}}if(x.options.sortPriority!==null&&x.options.sortPriority.length>0){if(u.length<x.options.sortPriority.length&&a(x.options.sortPriority)==="object"){for(var v=0;v<x.options.sortPriority.length;v++){x.addLevel(v,x.options.sortPriority[v])}}}else{x.addLevel(0)}x.setButtonStates()}};c.fn.bootstrapTable.methods.push("multipleSort");c.extend(c.fn.bootstrapTable.defaults,{showMultiSort:false,showMultiSortButton:true,sortPriority:null,onMultipleSort:function d(){return false}});c.extend(c.fn.bootstrapTable.defaults.icons,{sort:"glyphicon-sort",plus:"glyphicon-plus",minus:"glyphicon-minus"});c.extend(c.fn.bootstrapTable.Constructor.EVENTS,{"multiple-sort.bs.table":"onMultipleSort"});c.extend(c.fn.bootstrapTable.locales,{formatMultipleSort:function o(){return"Multiple Sort"},formatAddLevel:function p(){return"Add Level"},formatDeleteLevel:function m(){return"Delete Level"},formatColumn:function g(){return"Column"},formatOrder:function e(){return"Order"},formatSortBy:function r(){return"Sort by"},formatThenBy:function j(){return"Then by"},formatSort:function k(){return"Sort"},formatCancel:function h(){return"Cancel"},formatDuplicateAlertTitle:function l(){return"Duplicate(s) detected!"},formatDuplicateAlertDescription:function i(){return"Please remove or change any duplicate column."},formatSortOrders:function q(){return{asc:"Ascending",desc:"Descending"}}});c.extend(c.fn.bootstrapTable.defaults,c.fn.bootstrapTable.locales);var f=c.fn.bootstrapTable.Constructor,b=f.prototype.initToolbar;f.prototype.initToolbar=function(){this.showToolbar=this.showToolbar||this.options.showMultiSort;var x=this,u="sortModal_"+this.$el.attr("id"),z="#"+u;this.$sortModal=c(z);this.sortModalSelector=u;b.apply(this,Array.prototype.slice.apply(arguments));if(x.options.sidePagination==="server"&&!s&&x.options.sortPriority!==null){var v=x.options.queryParams;x.options.queryParams=function(t){t.multiSort=x.options.sortPriority;return v(t)}}if(this.options.showMultiSort){var y=this.$toolbar.find(">.btn-group").first(),w=this.$toolbar.find("div.multi-sort");if(!w.length&&this.options.showMultiSortButton){w='  <button class="multi-sort btn btn-default'+(this.options.iconSize===undefined?"":" btn-"+this.options.iconSize)+'" type="button" data-toggle="modal" data-target="'+z+'" title="'+this.options.formatMultipleSort()+'">';w+='     <i class="'+this.options.iconsPrefix+" "+this.options.icons.sort+'"></i>';w+="</button>";y.append(w);n(x)}this.$el.on("sort.bs.table",function(){s=true});this.$el.on("multiple-sort.bs.table",function(){s=false});this.$el.on("load-success.bs.table",function(){if(!s&&x.options.sortPriority!==null&&a(x.options.sortPriority)==="object"&&x.options.sidePagination!=="server"){x.onMultipleSort()}});this.$el.on("column-switch.bs.table",function(B,A){for(var t=0;t<x.options.sortPriority.length;t++){if(x.options.sortPriority[t].sortName===A){x.options.sortPriority.splice(t,1)}}x.assignSortableArrows();x.$sortModal.remove();n(x)});this.$el.on("reset-view.bs.table",function(){if(!s&&x.options.sortPriority!==null&&a(x.options.sortPriority)==="object"){x.assignSortableArrows()}})}};f.prototype.multipleSort=function(){var t=this;if(!s&&t.options.sortPriority!==null&&a(t.options.sortPriority)==="object"&&t.options.sidePagination!=="server"){t.onMultipleSort()}};f.prototype.onMultipleSort=function(){var u=this;var t=function t(w,z){return w>z?1:w<z?-1:0};var v=function v(y,x){var A=[],z=[];for(var B=0;B<u.options.sortPriority.length;B++){var w=u.options.sortPriority[B].sortOrder==="desc"?-1:1,C=y[u.options.sortPriority[B].sortName],D=x[u.options.sortPriority[B].sortName];if(C===undefined||C===null){C=""}if(D===undefined||D===null){D=""}if(c.isNumeric(C)&&c.isNumeric(D)){C=parseFloat(C);D=parseFloat(D)}if(typeof C!=="string"){C=C.toString()}A.push(w*t(C,D));z.push(w*t(D,C))}return t(A,z)};this.data.sort(function(x,w){return v(x,w)});this.initBody();this.assignSortableArrows();this.trigger("multiple-sort")};f.prototype.addLevel=function(u,v){var x=u===0?this.options.formatSortBy():this.options.formatThenBy();this.$sortModal.find("tbody").append(c("<tr>").append(c("<td>").text(x)).append(c("<td>").append(c('<select class="form-control multi-sort-name">'))).append(c("<td>").append(c('<select class="form-control multi-sort-order">'))));var w=this.$sortModal.find(".multi-sort-name").last(),t=this.$sortModal.find(".multi-sort-order").last();c.each(this.columns,function(y,z){if(z.sortable===false||z.visible===false){return true}w.append('<option value="'+z.field+'">'+z.title+"</option>")});c.each(this.options.formatSortOrders(),function(z,y){t.append('<option value="'+z+'">'+y+"</option>")});if(v!==undefined){w.find('option[value="'+v.sortName+'"]').attr("selected",true);t.find('option[value="'+v.sortOrder+'"]').attr("selected",true)}};f.prototype.assignSortableArrows=function(){var u=this,v=u.$header.find("th");for(var t=0;t<v.length;t++){for(var w=0;w<u.options.sortPriority.length;w++){if(c(v[t]).data("field")===u.options.sortPriority[w].sortName){c(v[t]).find(".sortable").removeClass("desc asc").addClass(u.options.sortPriority[w].sortOrder)}}}};f.prototype.setButtonStates=function(){var t=this.$sortModal.find(".multi-sort-name:first option").length,u=this.$sortModal.find("tbody tr").length;if(u==t){this.$sortModal.find("#add").attr("disabled","disabled")}if(u>1){this.$sortModal.find("#delete").removeAttr("disabled")}if(u<t){this.$sortModal.find("#add").removeAttr("disabled")}if(u==1){this.$sortModal.find("#delete").attr("disabled","disabled")}}})(jQuery)});